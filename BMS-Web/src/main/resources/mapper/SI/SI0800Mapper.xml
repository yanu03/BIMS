<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.tracom.bms.domain.SI0800.SI0800Mapper">

<select id="SI0800G0R0" resultType="Map" parameterType="Map">
	SELECT 
		DVC_KIND
		,PARAM_DIV
		,PARAM_KIND
		,DATA_TYPE
		,DATA_LENGTH
		,DATA_VAL
		,ATTR1_VAL
		,ATTR2_VAL
		,SCHEDULE_YN
		,USE_YN
		,AUTO_YN
		,REMARK
		,DATE_FORMAT(UPD_DTM, '%Y-%m-%d') UPD_DTM
		,UPD_ID
	FROM 
		BMS_DVC_PARAM_CFG_INFO
	<where>
			<if test="TYPE == 'ALL' and CONTENT != null and CONTENT != ''">
				AND (DVC_KIND LIKE CONCAT('%',#{CONTENT},'%') || PARAM_DIV LIKE CONCAT('%',#{CONTENT},'%'))
			</if>
			<if test="TYPE == 'DVC_KIND'">
				AND DVC_KIND LIKE CONCAT('%',#{CONTENT},'%')
			</if>
			<if test="TYPE == 'PARAM_DIV'">
				AND PARAM_DIV LIKE CONCAT('%',#{CONTENT},'%') 
			</if>
	</where>
	ORDER BY
		DVC_KIND
</select>
	
<select id="SI0800SHI0" resultType="Map">
	SELECT			DVC_KIND
					,PARAM_DIV	
	FROM			BMS_DVC_PARAM_CFG_INFO
</select>

<insert id="SI0800G0I0" parameterType="Map">	
	INSERT INTO BMS_DVC_PARAM_CFG_INFO(
			DVC_KIND
			,PARAM_DIV
			,PARAM_KIND
			,DATA_TYPE
			,DATA_LENGTH
			,DATA_VAL
			,ATTR1_VAL
			,ATTR2_VAL
			,SCHEDULE_YN
			,USE_YN
			,AUTO_YN
			,REMARK
			,UPD_DTM
			,UPD_ID
			) 
	VALUES(
			#{DVC_KIND}
			,#{PARAM_DIV}
			,#{PARAM_KIND}
			,#{DATA_TYPE}
			,NULLIF(#{DATA_LENGTH}, '')
			,#{DATA_VAL}
			,#{ATTR1_VAL}
			,#{ATTR2_VAL}
			,#{SCHEDULE_YN}
			,#{USE_YN}
			,#{AUTO_YN}
			,#{REMARK}
			,#{UPD_DTM}
			,#{SSN_USER_ID}
			)
</insert>

<delete id="SI0800G0D0" parameterType="Map">
	DELETE FROM 
		BMS_DVC_PARAM_CFG_INFO 
	WHERE 
		DVC_KIND = #{DVC_KIND} AND PARAM_DIV = #{PARAM_DIV} AND PARAM_KIND = #{PARAM_KIND}
</delete>

<update id="SI0800G0U0" parameterType="Map">
	UPDATE 
		BMS_DVC_PARAM_CFG_INFO 
	SET 
		DVC_KIND = #{DVC_KIND}
		,PARAM_DIV = #{PARAM_DIV}
		,PARAM_KIND = #{PARAM_KIND}
		,DATA_TYPE = #{DATA_TYPE}
		,DATA_LENGTH = NULLIF(#{DATA_LENGTH}, '')
		,DATA_VAL = #{DATA_VAL}
		,ATTR1_VAL = #{ATTR1_VAL}
		,ATTR2_VAL = #{ATTR2_VAL}
		,SCHEDULE_YN = #{SCHEDULE_YN}
		,USE_YN = #{USE_YN}
		,AUTO_YN = #{AUTO_YN}
		,REMARK = #{REMARK}
		,UPD_DTM = #{UPD_DTM}
		,UPD_ID = #{SSN_USER_ID}
	WHERE 
		DVC_KIND = #{DVC_KIND} AND PARAM_DIV = #{PARAM_DIV} AND PARAM_KIND = #{PARAM_KIND}
</update>

</mapper>